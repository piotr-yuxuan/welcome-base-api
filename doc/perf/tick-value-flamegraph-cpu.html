<html>
  <head>
    <style>
      body {margin: 0; padding: 5px; background-color: #ffffff}
      button {font: 12px sans-serif;}
      p {margin: 5px 0 5px 0}
      #hl {position: absolute; display: none; overflow: hidden; white-space: nowrap; pointer-events: none; background-color: #00000000; outline: 0.5px solid #222; height: 15px}
      #hl span {padding: 0 3px 0 3px}
      #status {overflow: hidden; white-space: nowrap}
      #match {overflow: hidden; white-space: nowrap; display: none; float: right; text-align: right}
      * {box-sizing:border-box,margin:.25em 0}
      .col{display:table-cell}
      .col-1{width:5%}
      .col-2{width:15%}
      .col-3{width:22%}
      .col-4{width:30%}
      .col-5{width:40%}
      .col-6{width:50%}
      .row{display:table;border-spacing:0.2em 0;width:100%;display:flex}
      .w-100{width:100%;display:flex}
      .graphCol{flex: 80%; padding: 0.25em;}
      .configCol{flex: 20%; padding: 0.25em;}
      .configBlock{position:fixed; overflow-y:auto; top: 5px; bottom: 5px; width:19%;}
      .sidebarToggle{font: 10px; width:10; padding:0;}
      .margins {margin: 5px 1px}
      .vmargins {margin: 0px 1px;}
    </style>
  </head>
  <body style='font: 12px Verdana, sans-serif'>
    <div class="c">
      <div class="row">
        <div class="graphCol">
          <canvas id='canvas' style='width: 100%;'></canvas>
          <div id='box'><div id='hl'><span></span></div></div>
          <p id='match'>Matched: <span id='matchedLabel'></span></p>
          <p id='status'>&nbsp;</p>
        </div>
        <button class="sidebarToggle" onclick="toggleSidebarVisibility()">&lt;</button>
        <div class="configCol">
          <div class="configBlock">
            <div class="row">
              <label for="highlightInput">Highlight:</label>
              <input placeholder="String or /regex/" name="highlightInput" id="highlightInput"/>
            </div>
            <div class="row">
              <button onclick="highlightApply()">Highlight</button>
              <button onclick="highlightClear()">Clear</button>
            </div>
            <br>
            <hr>
            <br>

            <label>Minimal frame width (in pixels):</label><br>
            <input id="minFrameWidthInPx" value="0.25"/><br>
            <div>
              <label><input type="checkbox" id="isReversedInput">Reversed</label>
              <span id="isNormalizedDiv" style="display:none;">
                <label><input type="checkbox" id="isNormalized" name="isNormalized" checked>Normalized</label>
              </span>
            </div>
            <div>
              <label><input type="radio" id="sortByNameRadio" name="sortBy" value="name" checked>Sort by name</label>
              <label><input type="radio" id="sortByWidthRadio" name="sortBy" value="width">Sort by width</label>
            </div>
            <br>

            <div class="row">
              <div class="col">
                <label for="newTransformType">Add a transform:</label>

                <select name="newTransformType" id="newTransformType">
                  <option value="filter">Filter</option>
                  <option value="remove">Remove</option>
                  <option value="replace">Replace</option>
                </select>
              </div>
              <div class="col col-2">
                <button onclick="addNewTransform()">Add</button>
              </div>
            </div>
            <br>

            <div id="transformsContainer">
            </div>

            <div id="transformReplaceTemplate" style="display:none">
              <div class="row">
                <div class="col col-3">
                  <label>Replace:</label><br>
                </div>
                <div class="col">
                  <input type="checkbox" class="chkEnabled" onclick="refreshAfterEnabledToggle()" checked>
                  <button class="minibtn btnMoveUp" title="Move up" onclick="moveTransformUp(this)">↑</button>
                  <button class="minibtn btnMoveDown" title="Move down" onclick="moveTransformDown(this)">↓</button>
                  <button class="minibtn btnClone" title="Clone" onclick="cloneTransform(this)">☍</button>
                  <button class="minibtn btnDelete" title="Delete" onclick="deleteTransform(this)">✖</button>
                </div>
              </div>
              <div class="row" style="margin-top:1px;margin-bottom:1px">
                <div class="col w-100 no-vmargins">
                  <input class="what no-vmargins w-100" placeholder="String or /regex/"/><br>
                </div>
              </div>
              <div class="row" style="margin-top:1px;margin-bottom:1px">
                <div class="col w-100 no-vmargins">
                  <input class="replacement no-vmargins w-100" placeholder="Replacement"/><br>
                </div>
              </div>
            </div>

            <div id="transformFilterTemplate" style="display:none" class="margins">
              <div class="row">
                <div class="col col-3">
                  <label class="label">Filter:</label><br>
                </div>
                <div class="col">
                  <input type="checkbox" class="chkEnabled" onclick="refreshAfterEnabledToggle()" checked>
                  <button class="minibtn btnMoveUp" title="Move up" onclick="moveTransformUp(this)">↑</button>
                  <button class="minibtn btnMoveDown" title="Move down" onclick="moveTransformDown(this)">↓</button>
                  <button class="minibtn btnClone" title="Clone" onclick="cloneTransform(this)">☍</button>
                  <button class="minibtn btnDelete" title="Delete" onclick="deleteTransform(this)">✖</button>
                </div>
              </div>
              <div class="row">
                <div class="col w-100 margins">
                  <input class="what margins w-100" placeholder="String or /regex/"/><br>
                </div>
              </div>
            </div>

            <hr>
            <button onclick="applyConfiguration()">Apply</button>
          </div>
        </div>
      </div>
    </div>
    <script>
      // This file was derived from flamegraph.html from the project
// https://github.com/jvm-profiling-tools/async-profiler
// Licensed under the Apache License, Version 2.0. Copyright 2020 Andrei Pangin

/// Constants
const canvas = document.getElementById('canvas');
const c = canvas.getContext('2d');
const hl = document.getElementById('hl');
const status = document.getElementById('status');
const matchContainer = document.getElementById('match');
const transformFilterTemplate = document.getElementById('transformFilterTemplate');
const transformReplaceTemplate = document.getElementById('transformReplaceTemplate');
const sidebarToggleButton = document.getElementsByClassName('sidebarToggle')[0];
const sidebarWidth = document.getElementsByClassName('configCol')[0].offsetWidth

var sidebarVisible = true;
sidebarToggleButton.innerText = sidebarVisible ? '>' : '<';

function calculateCanvasWidth() {
  if (sidebarVisible)
    return window.innerWidth - sidebarWidth - 36
  else
    return window.innerWidth - 36;
}

var canvasWidth = calculateCanvasWidth();
var isDiffgraph = false;
var normalizeDiff = true, b_scale_factor;
var reverseGraph = false;
var idToFrame = ["[unknown_Java]",
"Interpreter",
"err_codes_libkern_kext",
"supported",
"thread_native_entry(Thread*)",
"Thread::call_run()",
"ConcurrentGCThread::run()",
"G1ServiceThread::run_service()",
"G1ServiceThread::sleep_before_next_cycle()",
"Monitor::wait_without_safepoint_check(long long)",
"os::PlatformMonitor::wait(long)",
"__psynch_cvwait",
"GangWorker::run()",
"GangWorker::loop()",
"G1BatchedGangTask::work(unsigned int)",
"G1GCParPhaseTimesTracker::~G1GCParPhaseTimesTracker()",
"CompositeElapsedCounterSource::seconds(PairRep<long, long>)",
"G1RemSetScanState::G1ClearCardTableTask::do_work(unsigned int)",
"CardTable::clear(MemRegion)",
"_platform_bzero$VARIANT$Haswell",
"G1EvacuateRegionsBaseTask::work(unsigned int)",
"G1EvacuateRegionsBaseTask::evacuate_live_objects(G1ParScanThreadState*, unsigned int, G1GCPhaseTimes::GCParPhases, G1GCPhaseTimes::GCParPhases)",
"G1ParEvacuateFollowersClosure::do_void()",
"SpinPause",
"TaskTerminator::offer_termination(TerminatorTerminator*)",
"Mutex::lock_without_safepoint_check()",
"err_codes_mach_send",
"__psynch_mutexwait",
"G1EvacuateRegionsTask::scan_roots(G1ParScanThreadState*, unsigned int)",
"G1RemSet::scan_heap_roots(G1ParScanThreadState*, unsigned int, G1GCPhaseTimes::GCParPhases, G1GCPhaseTimes::GCParPhases, bool)",
"G1ScanHRForRegionClosure::do_heap_region(HeapRegion*)",
"G1ScanHRForRegionClosure::scan_heap_roots(HeapRegion*)",
"G1RootProcessor::evacuate_roots(G1ParScanThreadState*, unsigned int)",
"G1RootProcessor::process_java_roots(G1RootClosures*, G1GCPhaseTimes*, unsigned int)",
"ClassLoaderDataGraph::roots_cld_do(CLDClosure*, CLDClosure*)",
"Threads::possibly_parallel_oops_do(bool, OopClosure*, CodeBlobClosure*)",
"Threads::possibly_parallel_threads_do(bool, ThreadClosure*)",
"ParallelOopsDoThreadClosure::do_thread(Thread*)",
"JavaThread::oops_do_frames(OopClosure*, CodeBlobClosure*)",
"frame::oops_do_internal(OopClosure*, CodeBlobClosure*, RegisterMap const*, bool, DerivedPointerIterationMode) const",
"G1CodeBlobClosure::do_code_blob(CodeBlob*)",
"nmethod::oops_do_process_weak(nmethod::OopsDoProcessor*)",
"metadata_Relocation::unpack_data()",
"nmethod::fix_oop_relocations(unsigned char*, unsigned char*, bool)",
"G1RemSet::scan_collection_set_regions(G1ParScanThreadState*, unsigned int, G1GCPhaseTimes::GCParPhases, G1GCPhaseTimes::GCParPhases, G1GCPhaseTimes::GCParPhases)",
"G1CollectionSet::iterate_incremental_part_from(HeapRegionClosure*, HeapRegionClaimer*, unsigned int, unsigned int) const",
"G1CollectionSet::iterate_part_from(HeapRegionClosure*, HeapRegionClaimer*, unsigned long, unsigned long, unsigned int, unsigned int) const",
"G1ScanCollectionSetRegionClosure::do_heap_region(HeapRegion*)",
"G1EvacPhaseWithTrimTimeTracker::~G1EvacPhaseWithTrimTimeTracker()",
"CompositeElapsedCounterSource::now()",
"mach_absolute_time",
"G1RebuildFreeListTask::work(unsigned int)",
"semaphore_wait_trap",
"JavaThread::thread_main_inner()",
"CompileBroker::compiler_thread_loop()",
"CompileBroker::invoke_compiler_on_method(CompileTask*)",
"Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)",
"Compilation::Compilation(AbstractCompiler*, ciEnv*, ciMethod*, int, BufferBlob*, bool, DirectiveSet*)",
"Compilation::compile_method()",
"Compilation::compile_java_method()",
"Compilation::emit_code_body()",
"Compilation::emit_code_epilog(LIR_Assembler*)",
"LIR_Assembler::emit_slow_case_stubs()",
"CounterOverflowStub::emit_code(LIR_Assembler*)",
"LIR_Assembler::store_parameter(Metadata*, int)",
"MacroAssembler::mov_metadata(Address, Metadata*)",
"Assembler::movq(Address, RegisterImpl*)",
"JVMCIRuntime::compile_method(JVMCIEnv*, JVMCICompiler*, methodHandle const&, int)",
"JVMCIEnv::call_HotSpotJVMCIRuntime_compileMethod(JVMCIObject, JVMCIObject, int, long, int)",
"JNIEnv_::CallNonvirtualObjectMethod(_jobject*, _jclass*, _jmethodID*, ...)",
"JNIJavaCallWrappers_jniInvoke_VA_LIST_Nonvirtual_HotSpotJVMCIRuntime_compileMethod_d0551eb00a95b4c222b2a67a9746353d2d54cfa9_9777f9dc163dec00804c9517af22aed879be96a0",
"HotSpotJVMCIRuntime_compileMethod_d0551eb00a95b4c222b2a67a9746353d2d54cfa9",
"HotSpotGraalCompiler_compileMethod_e38c89e51c012e7f227ec5003d2752b35b2d1d20",
"HotSpotGraalCompiler_compileMethod_50d3ecc300d7afc2461a39f7c78f423a8314cf9b",
"HotSpotGraalCompiler_compileMethod_5647c5b255b375f8765f87fdde1408357348e632",
"CompilationTask_runCompilation_90c8888471d47c5d371416635056aa3c9c3a2238",
"CompilationWrapper_run_230b998b01f7b6f8aa59ffa779a359674753600b",
"CompilationTask$HotSpotCompilationWrapper_performCompilation_33ff9935997e9b7516e735b1da6765438369c08a",
"CompilationTask$HotSpotCompilationWrapper_performCompilation_dcd7de759f794bba47a846b2715bb72b7302d616",
"CompilationTask_installMethod_696f7abdb9e00f99fb658590a139165443e027ad",
"Backend_createInstalledCode_9e07b98336b1e9134ddbd1b9f364731ab90ec1de",
"HotSpotCodeCacheProvider_installCode_3a03b5597e27316aa2c6fde9024f8af0e460e84c",
"CompilerToVM_installCode_ff402159e6f168ca78389c3ae681697d50d4abbd",
"c2v_installCode(JNIEnv_*, _jobject*, _jobject*, _jobject*, _jobject*, long, _jbyteArray*)",
"CodeInstaller::install(JVMCICompiler*, JVMCIObject, JVMCIObject, CodeBlob*&, nmethodLocker&, JVMCIObject, FailedSpeculation**, char*, int, JVMCIEnv*)",
"CodeInstaller::initialize_buffer(CodeBuffer&, bool, JVMCIEnv*)",
"CodeInstaller::estimate_stubs_size(JVMCIEnv*)",
"JVMCIEnv::get_object_at(JVMCIObjectArray, int)",
"HandleMark::~HandleMark()",
"CodeInstaller::site_Call(CodeBuffer&, int, JVMCIObject, JVMCIEnv*)",
"CodeInstaller::record_scope(int, JVMCIObject, CodeInstaller::ScopeMode, GrowableArray<ScopeValue*>*, bool, bool, JVMCIEnv*)",
"CodeInstaller::get_scope_value(JVMCIObject, BasicType, GrowableArray<ScopeValue*>*, ScopeValue*&, JVMCIEnv*)",
"JNIJVMCI::Value::get_ILLEGAL(JVMCIEnv*)",
"CodeInstaller::record_virtual_objects(JVMCIObject, JVMCIEnv*)",
"CodeInstaller::record_object_value(ObjectValue*, JVMCIObject, GrowableArray<ScopeValue*>*, JVMCIEnv*)",
"JVMCIEnv::has_pending_exception()",
"IsolateEnterStub_JNIFunctions_ExceptionCheck_c3880ec5388acdaaf0a33f93c718f75d394cf800_56464c7018196a101b3a4a0b8a60eff8ca309807",
"CodeInstaller::site_Infopoint(CodeBuffer&, int, JVMCIObject, JVMCIEnv*)",
"JNIJVMCI::BytecodePosition::get_bci(JVMCIEnv*, JVMCIObject)",
"JNIJVMCI::site_InfopointReason::get_IMPLICIT_EXCEPTION(JVMCIEnv*)",
"JNIFunctions_GetStaticObjectField_6f81d71f0952a597d8018739173b0979f0b8b650",
"JVMCIRuntime::register_method(JVMCIEnv*, methodHandle const&, nmethodLocker&, int, CodeOffsets*, int, CodeBuffer*, int, OopMapSet*, ExceptionHandlerTable*, ImplicitExceptionTable*, AbstractCompiler*, DebugInformationRecorder*, Dependencies*, int, bool, bool, JVMCIObject, JVMCIObject, FailedSpeculation**, char*, int)",
"nmethod::new_nmethod(methodHandle const&, int, int, CodeOffsets*, int, DebugInformationRecorder*, Dependencies*, CodeBuffer*, int, OopMapSet*, ExceptionHandlerTable*, ImplicitExceptionTable*, AbstractCompiler*, int, GrowableArrayView<RuntimeStub*> const&, char*, int, int, char const*, FailedSpeculation**)",
"HotSpotGraalCompiler_compile_07a2b83c7a0ac1a7ecf68380022f37bb2a8e555d",
"HotSpotGraalCompiler_compileHelper_d3a966217707633929a5b5a4a7670fbd583caf11",
"GraalCompiler_compileGraph_7c727cf4f7ff3555660a81773d74fd53c28861a9",
"GraalCompiler_compile_5fc27c66103532b8aadfba9a53a0cfc56727e415",
"GraalCompiler_emitFrontEnd_dd11dd9655984367d3f025d8b405bcbf578143da",
"BasePhase_apply_713211387b7de6171c1a19a72e42a60bacd2d824",
"PhaseSuite_run_ecb0057d494f6b78d114803459b0549dac0f590e",
"AddressLoweringPhase_run_2f7088cd737d199eab6a151d2ba19144dd63b82f",
"AddressLoweringPhase_run_384007390a7e51702f3335d2ba2e0960a992e270",
"AMD64HotSpotAddressLowering_preProcess_9381e95e11ed7da095d4edc17b066ee24604c142",
"LoopsData_constructor_5fe9234062ec1c8a9f7386919c4076f20437d95a",
"ControlFlowGraph_compute_a63f8758400e4e42c752fc4a6b7c4bc799df548d",
"ControlFlowGraph_identifyBlocks_91c6bd2376323c10cda627f1ed5130f90d88a82f",
"ReversePostOrder_identifyBlocks_a434e645de3262a8ef97f814aa62be0f987ec6c6",
"NodeBitMap_mark_fd117738391215b9dd7f1070c1a6dd4b41c13cd5",
"CanonicalizerPhase_run_9f8a39f2353a4c3a71749a4f800c6ebaf3a0da3a",
"CanonicalizerPhase_run_49530004b904addfaa6539c4183571d4fafafef7",
"CanonicalizerPhase$Instance_run_671f7df7cc98f6651d492d7e4e232a17c63a02bc",
"CanonicalizerPhase$Instance_processWorkSet_a3dad50853800e6a49d03763ce1b26bcbbc89703",
"CanonicalizerPhase$Instance_processNode_36be520dc7d8525bad5b7fa18031580ee6572b3a",
"CanonicalizerPhase$Instance_tryGlobalValueNumbering_b31cc300fb8f8c799032bad76096d8c6c8ab7cbb",
"Graph_findDuplicate_04f71970242e686a607aac1650d1b35f629fdc96",
"NodeWorkList$IterativeNodeWorkList$1_hasNext_b1747c7df33e07fc7965285ce2c80b2425158ff4",
"NodeWorkList$QueueConsumingIterator_dropDeleted_0ff8ff730e9d0b47478d612b734323090581f7a4",
"FixReadsPhase_run_eadcbaa265fddfc43cd68e424a7d492689320d0e",
"FixReadsPhase_run_3b4a400071b68d362c5469b06e8f723e89497bb6",
"SchedulePhase_run_7d57cb44b92cc72b058895e9b71cab0eef3f80d3",
"SchedulePhase_run_cc03e14c4e377b2874b47ab4f9853a3ab5a30902",
"SchedulePhase$Instance_run_1828bfd7a56bcfe6d09a4adeece509e6120bcf01",
"NodeMap_set_c00c8d358fedf9f1c4da34997b1824d655070096",
"ReversePostOrder_compute_6d7221f05913ada7fd56958d07592bf94cad5ffb",
"SchedulePhase$Instance_scheduleEarliestIterative_f11f1d84d698be305ec40ea50fa995f7185d393f",
"SchedulePhase$Instance_processNodes_e01086c3b44e52c33975624383b11350998074c8",
"NodeClass$RawEdgesIterator_hasNext_92249b285a6e1375cdc6634ff2fe08bc7fae2b69",
"NodeClass$RawEdgesIterator_forward_a995c18efda6ed88a1c6d003330c491740373655",
"NodeClass$RawEdgesIterator_getInput_39e41d4ecb16fa04b66fd3eca668298c7fe80635",
"CanonicalizerPhase_applyIncremental_8daa783c42f19396e3e17c3f3e3f7e1fb72e7ac5",
"Phase_run_7939eccd2fbb28f22cd01b77a39d0f3f725002da",
"CanonicalizerPhase$Instance_tryCanonicalize_52a8ad48d36c3a2a686dd669a6757fd3d30f36a3",
"IfNode_simplify_9e26888f05769de31d900e952feb6d957443af34",
"CanonicalizerPhase$Instance$Tool_deleteBranch_54cca6f13ad57b543f0ec4c8bd808cbbff27240e",
"GraphUtil_killCFG_e3cc7ecb54bb89f0323b9492d2bb031a75aa3db8",
"GraphUtil_killCFGInner_1224cafb5c48816888fac996fc0748e639073650",
"GraphUtil_fixSurvivingAffectedMerges_b02da02f1e0b5645af03b9208ed79a56743b8a11",
"AbstractMergeNode_removeEnd_3f9407a87e5065de17ccd32302ccb9fd09158bfd",
"NodeIterable_snapshotTo_aaa889e6305acc656c87b634a3bfdc6fb74b6984",
"NodeIterator_next_334faffda9c82438941e0daa2c9f0915b658cd75",
"NodeIterator_next_c58f53badf00c10fbb03fd453ed1a4064e5e7039",
"PredicatedProxyNodeIterator_forward_ecd79197b179fb5fc8b47203a1fa126599252c97",
"NodePredicates$AndPredicate_apply_27b8931bf8c514d09d15420f4af8e3de06a9e606",
"NodePredicates$PositiveTypePredicate_apply_53bcc431374faa566af2da0c75e1b00ddd5a6f85",
"FixReadsPhase_createVisitor_075512de46d343b83957a2bc8afd645d7728218d",
"FixReadsPhase$RawConditionalEliminationVisitor_constructor_1c7e430969f5ddc99c5ea543215b5b3a511ef476",
"GraphBuilderPhase_run_1c83dae160130ef9ac143eabf153b264c6c02f51",
"GraphBuilderPhase_run_06859817cc94f593c35119fed21a590e64b36a8d",
"GraphBuilderPhase$Instance_run_b2b36039ca684123c1ec14e6804d1c7a4e65a75c",
"BytecodeParser_buildRootMethod_cf5d228f95e1aef84e07bec7df2926f9c73b6177",
"BytecodeParser_build_3618b1a686d7b02d5c64bdd545c0ad56bf942aa6",
"LocalLiveness_compute_c04603b3f17957d9de961e1fa2771a119913e0cd",
"LocalLiveness_computeLiveness_386612db54bcd523cde5557db43ec78a866bdac5",
"LocalLiveness_computeLocalLiveness_0388a7f86bc4e4a1c243f30718a7c1cf50e34a2b",
"BytecodeStream_setBCI_8e9ace0a2f7c296b9f5a0dc0f3e9734be2241c1b",
"BytecodeStream_lengthOf_5687020aa0023265dc81d8c130f369087edfab17",
"GuardLoweringPhase_run_09bbbd98fa4be25082dddd32d5265c20d83d9a5c",
"GuardLoweringPhase_run_b0d0ab631ef27fd306d113a6b8e474c2e8483255",
"GuardLoweringPhase_processBlock_bb6b18534c357ca844662fc35adbdc0df9bff94d",
"ScheduledNodeIterator_processNodes_4740801703337080e46d08cd1f9c0f884197fff3",
"ArrayList_listIterator_4d0e96605def5943c0057f9a9a7c05a503f46def",
"SchedulePhase_runWithoutContextOptimizations_f40691eb71e10d2ed529cc055e250eab4ed6b07c",
"TypedGraphNodeIterator_findNext_035e10be8c845622e2d76230dc8157b681789e50",
"TypedGraphNodeIterator_forward_91add3e6d25515577d2d43cf5132ffa42309baf2",
"Graph_getIterableNodeNext_ab1401493cbc4aaa95ef4ed30b1fddd9646bd08e",
"IncrementalCanonicalizerPhase_run_ad05c0d3d9f4206c8f044d1b5271f450958cd2d2",
"IncrementalCanonicalizerPhase_run_2f32f23b4745c1b5e791fbafc373edf7b03da19f",
"LoopUnswitchingPhase_run_04c1b1f425ae8680ddb73552dcec0d505957878f",
"LoopUnswitchingPhase_run_90f82803da500b2e76f741161a5e312a40999091",
"LoopTransformations_unswitch_bf9a3df89170f1672d9735a961edbd441269bade",
"LoopFragmentWhole_reify_d90a92afbc2cf1ce5a2a9f33faf34a011f5ab8ac",
"LoopFragment_mergeEarlyExits_8e7571f372a7fc14ef9066e510f000449528e8ed",
"PhiNode_addInput_b00df42c0ee097d751aa1a62044e044e6e6f748b",
"NodeList_add_cdb27952106c6da9e31715112756943add67710a",
"NodeInputList_update_bc661be5b33df0787ebdf374cb192d837cea6f14",
"Node_updateUsages_db0d36b5d1ae1302747cc44ee5f9784f42a6ab39",
"Node_maybeNotifyInputChanged_e1d2b2ee34825cdea404cf491469e156408e8de0",
"Graph$NodeEventListener_event_1d174f9e2d6fe725952d45785d9a6a380b338dff",
"EconomicSetNodeEventListener_changed_4d59c4acf503d3e31e7b2c37c9332bed383d6bb4",
"FloatingReadPhase_run_7fa617d2974fa75bb1ccab1c029e76206080060e",
"ReentrantNodeIterator_apply_59b036dc10d185170659291c94b08d1004fc3ed8",
"FloatingReadPhase$FloatingReadClosure_processLoop_7a83f03ecffc9d3b47a39c8e1921928bb64b3913",
"FloatingReadPhase$FloatingReadClosure_processLoop_e798c4f7c591cfd1995ce23d5e9b9b902b3537f4",
"ReentrantNodeIterator_processLoop_6f8505023cb12904bb3848a3069707a91edcbaf5",
"FloatingReadPhase$FloatingReadClosure_processNode_3e365b34ec8a01054627a0c5fd88a40981bc98ca",
"FloatingReadPhase$FloatingReadClosure_processNode_56d188516146562a2fb353e030d7c7bbae25604c",
"FloatingReadPhase$FloatingReadClosure_processAccess_0f36691f8789f301fc283587301ff45c0dea95d7",
"FixedAccessNode_setLastLocationAccess_743b8db0bf692d28d007cacb731e59edc810bc54",
"ValueNode_updateUsagesInterface_17945b470b00b5540146ff491695e3ddb2515548",
"Graph$ChainedNodeEventListener_changed_3ab8f0bd6aea78aa3d54355dff7a957f6b1e1144",
"InliningPhase_run_e6db7cf874d53dc91507291a473f2cc62c2efa89",
"InliningPhase_run_f4ac30eb44649be83d004d685c2edc25e6a1e527",
"InliningData_constructor_e39241a39d119933343174f098581d56526e4dea",
"CallsiteHolderExplorable_constructor_33ea8894ba7c8633dff9d4aefbeb58690e0f7444",
"ComputeInliningRelevance_compute_f6224ac746ca4b23e79c0619b5ffbca3bc513df8",
"ComputeInliningRelevance$Scope_process_cedf434f65083459dc116ca05da40a87c75e3a6a",
"ComputeInliningRelevance$Scope_computeInvokeRelevance_ae4bf5ac86193daffcc585677724ec3064beb3d8",
"ComputeInliningRelevance$Scope_getFastPathMinProbability_74fdbdb5281de17884be016179af5dba33fab82f",
"ComputeInliningRelevance_computeFastPathMinProbability_9f158f0610965cdb171a9bb63d32b65134de80f1",
"ComputeInliningRelevance_getMinPathProbability_1f0c2ad54c2ae64c6ca0944c12a106faac28413b",
"FixedNodeRelativeFrequencyCache_applyAsDouble_ee2372c20ba4237aaca16619e697b091da751c53",
"ControlFlowGraph_computeFrequencies_7dd02d5c496518b12ece7add6f3d0698ede61be7",
"ControlFlowGraph_rpoInnerLoopsFirst_6c6bdc24c946d71ffa70b15729e0159e98652619",
"ControlFlowGraph$RPOLoopVerification_loopFullyProcessed_2ad2275cd7878ab10b69472d44919d7894f20802",
"NodeIterable_count_dc00660ccb5cb66fec7dd5c2992fae11d7d98d12",
"ReversePostOrder_assignPredecessorsAndSuccessors_8bc2e1e39349e220a0e7bc9e817dbd591de88cf2",
"ArrayList_add_1f41ac6612d40654ece03773af4ead4bc05b3fb8",
"FixedNodeRelativeFrequencyCache_handleMerge_85ca1cf834bebf09d7cd1bc09492857f9acdff15",
"InliningData_moveForward_61b4cb014bb6c223e91d6c82648c7ae0d3193161",
"GreedyInliningPolicy_isWorthInlining_1c1a79023afecbfd4974a740d01b1fc107f62ec1",
"AbstractInliningPolicy_determineInvokeProbability_217620fff60652377753d152892517f2298d1247",
"InlineableGraph_getProbability_77c10e806b3d77478c6583b71c5a8170b168d4d0",
"NodeIdAccessor_getNodeId_5fe2702db9062d8bb332528312793f0eeeaec02f",
"AbstractInliningPolicy_isIntrinsic_f7a41e6a5cd9e7fd223e89072cbdec87818aa827",
"AbstractInliningPolicy_onlyForcedIntrinsics_ed558056ca195a4e298d4372cbb2db1187d0d2cd",
"AbstractInliningPolicy_onlyIntrinsics_4021cb4e190cf8fd6644a51f70e73d308640277d",
"ReplacementsImpl_hasSubstitution_27e51a8ed59eea3e685ee12cd2a6b48a4eb7ffd0",
"InvocationPlugins_lookupInvocation_8af9ea671dc6b261a18e6e34aedd62df9f778ae5",
"InvocationPlugins_get_78ca846126a50f042d0e0876e7edf37e8000fa60",
"HotSpotInvocationPlugins_canBeIntrinsified_22addd190f761908e3a903791e9a3d794db24f22",
"HotSpotJVMCIRuntime$2_test_ea8b3a8fceac27873f926c0b3b5ae3d7fc5fb74f",
"HotSpotJVMCIRuntime$2_test_0a3802481709dabafb96bc8373ad3eb55bbf1b63",
"CompilerToVM_isTrustedForIntrinsics_d376488b9aa0fa9e8e34dc4242913be196eb6057",
"c2v_isTrustedForIntrinsics(JNIEnv_*, _jobject*, _jobject*)",
"JVMCIEnv::asKlass(JVMCIObject)",
"JNIJVMCI::HotSpotResolvedObjectTypeImpl::get_metadataPointer(JVMCIEnv*, JVMCIObject)",
"InliningData_processNextInvoke_6aa31ad3e23598b978847c6e7c2bbaba909d7f9b",
"AbstractInlineInfo_populateInlinableElements_43806c6e97853f5f355637b414bfe781a7fd84e8",
"CoreProvidersImpl_getReplacements_4f0316c559b7dd1fed353d9ebb12834a63dd3bac",
"InlineableGraph_constructor_b5537eaf225fa4b063dc96af1deaf01d8c0d9748",
"InlineableGraph_parseBytecodes_383b5dfbc6910e3bb629be5ff5544e78fdfe1197",
"BytecodeParser_generateBlockMap_0ca84f31e7e22ba2741ae8f8db0c48891c2b3207",
"BciBlockMapping_create_c5bcb7013c5374af287c68aac401e26338e0903a",
"BciBlockMapping_buildMap_73720160e17a465fdd11fdfecdf57a4a88d4692c",
"BciBlockMapping_build_2a7a84798317b03af6c9e18ecf284da67fc2fb54",
"BciBlockMapping_iterateOverBytecodes_cffa86f78fe8780436655047951ca32592dcdb7f",
"BytecodeParser_processBlock_ec0d67fae85e7a66a62d230bfdd000f577f0cbd6",
"BytecodeParser_handleBytecodeBlock_648f3355709d7ddbd463b7258df7d4d230f70e2d",
"BytecodeParser_iterateBytecodesForBlock_42b1962e6fa2cb90547e67954471496e50b7ca4d",
"BytecodeParser_processBytecode_ab899ffb386ab74cd292aa1e720b59177c3c4dd1",
"BytecodeParser_genIfSame_bcf53146060fde1f12bab808cb9506d023147609",
"BytecodeParser_genIf_5f373b77a61154ba2aabc18f136cc483e45ad7b0",
"BytecodeParser_genIf_0f5cc97778e1662bcd7cfa62b4d74c80539ebf24",
"BytecodeParser_createTarget_61aa530b29a37133c5c120a61b2fc300847cea7f",
"Graph_add_c18124ec79050028c67bcb0a4f07a20210b1934b",
"Node_initialize_3003730a5a3f4c25f00e57bd45f5ddf4cfb46d8a",
"Graph_register_ce602ff6019af0017cf6f2814ac7c980ff37377c",
"BytecodeParser_genInvokeInterface_3d97eddc810290a04d36eaca5093fc5c3b4ba4f3",
"BytecodeParser_genInvokeInterface_4ef2556df34cb0704542d4c2b7713ffe96a386a8",
"BytecodeParser_appendInvoke_90d326a0e08660620a0e2dcaf22b4d8785d19e37",
"MethodCallTargetNode_findSpecialCallTarget_26b762c4d7b4e66810ff4e5c42b88e54c743d7bc",
"MethodCallTargetNode_devirtualizeCall_2ca5f4522e0897f6fee6b466e00d7e03bf09c644",
"HotSpotResolvedObjectTypeImpl_findUniqueConcreteMethod_d40d1622e9c81133d459f75f1c93e1286dfad0b3",
"HotSpotResolvedJavaMethodImpl_canBeStaticallyBound_415a742bb1fa650c1135356feb0c56b351f8a2be",
"HotSpotResolvedJavaMethodImpl_isConstructor_65f9921aaafbca46a46e71f7062492d9d0d79d08",
"HotSpotJVMCIRuntime_runtime_e71a6b8bbdf0efdd063cc39758d7046d5968353d",
"BytecodeParser_genInvokeStatic_03212304b6ab417def96c7f989caf853bcb68222",
"BytecodeParser_genInvokeStatic_4c0377013bf24ebe988ba38bee84804afd533f28",
"BytecodeParser_tryInvocationPlugin_e26fa0f6b81a19c1555d11e8b0f32cd6673ba473",
"BytecodeParser_applyInvocationPlugin_d1b93e22f9f7ddb0b160f9216a4612881aa65c32",
"MethodSubstitutionPlugin_execute_a6bab5fa80274c6332e7f38003158c52ad7ff44e",
"EncodedSnippets_getMethodSubstitutionGraph_056e111aaee8aa7bbdd29f5df0bc1ab2abd45cbd",
"PEGraphDecoder_decode_90d0c9be232dcde8459e976537ed932eaf26da37",
"GraphDecoder_decode_34a92b5de69767cbe654cf634a445a6872ab05ef",
"GraphDecoder_processNextNode_58dddf324419422e10f4b567bfeebe5e4652e72f",
"SimplifyingGraphDecoder_handleFixedNode_bd959c24c5aa3c3fe10a52fd37a72aea3463d2b7",
"PEGraphDecoder_canonicalizeFixedNode_4f8ebd414041c8f7a1c418cd5e6730395ddd0953",
"PluginReplacementNode_replace_6c052323aa101c0f2651e38f7227c4249fcb83f8",
"PluginReplacementNode_ReplacementsUtil_charArrayIndexScale_replace_10b5c232c65adb7fe35e1e9a6948c24a3c09d723",
"ConstantNode_forConstant_bbac664a29b0d3fbd5c1bc60c805d8e6ed3d1c40",
"ConstantNode_unique_271296f4ca3fd1f264e50310429612abfd02581d",
"Graph_uniqueHelper_2f6997c5abe734058281e99fb69d21d51b150814",
"BytecodeParser_genInvokeVirtual_07b3f1581f42062a2428efbd0cf992bf25b96041",
"BytecodeParser_genInvokeVirtual_ff77704eea7fe5b44dc8cfdeb5087b1fc5d16db3",
"BytecodeParser_genDynamicInvokeHelper_a13cf65fd8bb86818f0b17fdf9eb45969bca437c",
"ResolvedJavaType_resolveConcreteMethod_607e6e1c020d27c8a23d66f938ffa622626c993e",
"BytecodeParser_loadLocalObject_3b01b11c1ffcdd9e352fe6e2c8c0ebee61ad23b3",
"BytecodeParser_openNodeContext_c425af300a6ffaa74cc81669d4babb278d8297f7",
"BytecodeParser_openNodeContext_c319e5383ad9010a7c965e1780df081e0c25a861",
"FrameStateBuilder_createBytecodePosition_1a60f69ad8258e6fb4de9208003f918eff357cde",
"FrameStateBuilder_create_e3221883216210900e0fe9cf660860b31af6aa6f",
"NodeSourcePosition_constructor_4fef1f487fbd8ebdce5aa64096bcef5a3a33aa4f",
"HotSpotResolvedJavaMethodImpl_hashCode_b356990bc7cc1f6c6af195838a501fe42a00b748",
"FrameStateBuilder_constructor_fe08de612df13c00adbe2b1f2f9131ba69b0ee81",
"SubstrateObjectCloneSnippets_doClone_db0ee7c8158f193d1d31cda0e976ab6bc6b87a63",
"InliningData_getInlineInfo_c59ebe915247bd7923f1a6a070ff2c498f4b2b83",
"InliningData_getExactInlineInfo_b7b8bb6e85821379be9c2d907b36ddfa95b819c0",
"InliningData_checkTargetConditions_7641af4bb9591f480bd9bbc53ef6e3a0aa6a2299",
"HotSpotResolvedObjectTypeImpl_isInitialized_cfb7822565c4b9b53fad1b7a79955434fd80c63e",
"InliningData_tryToInline_e6af6cc14bbe09ddb942e07f23c9768c79a74a34",
"InliningData_doInline_a060b07a2dc4712bb45063e78567895e4f3a8b1d",
"ControlFlowGraph_computeFrequenciesFromLocal_b3cef69b9a0ff1d1b614d2c676c9d583f8eb6864",
"ControlFlowGraph_perBasicBlockFrequencyAction_b75b1e8db8956e4b63aea0808d57b045dfdce644",
"ControlFlowGraph$$Lambda$768de9589d03e258b78d16e78a4b2c2c94d40286_accept_8ee67d6bd2aa0ed75327954284566b773ba0bd50",
"ControlFlowGraph_finishLocalLoopFrequency_6098234bf773724767f020c84fc27330db80c087",
"ControlFlowGraph_calculateLocalLoopFrequency_1ed56e2189925ee31baf4285c2a0b8057d93c96d",
"FilteredNodeIterable_iterator_77c7c83b0ad4dc743814b78006b436f6f1e27631",
"NodeUsageIterable_iterator_71533b271dc3f364815f1ceb870a0d0611bcfd52",
"NodeUsageIterator_advance_88ea635f3ffc41c50ce2d88ef2e8986c15e4ebd5",
"EconomicSet_addAll_49d51b5bf63c195dfb369371c363b49a593f5951",
"EconomicSet_addAll_0e676f1e8cd65551a50b2c9cb7d2350a41471157",
"EconomicMapImpl_put_1942aede0a18600a103fb4fb4c713214040b54fc",
"EconomicMapImpl_putHashEntry_1ea78e2c71d95d0cd90ff4c443bc1f42479b43fc",
"IterativeConditionalEliminationPhase_run_d728078a26308d80355b8d55bf0f9eb2a1935cb4",
"IterativeConditionalEliminationPhase_run_583e416d5a1153d448164fddd8a166f310732e00",
"ConditionalEliminationPhase_run_7965cfa0b94abfea92479a17bf8794ff0633bd5f",
"ConditionalEliminationPhase_run_9b05610cf0e642952cea27a120b5c8da75ea39b5",
"ControlFlowGraph_visitDominatorTree_8aab9a0a396d95a81738e2b1caafae8346fa772f",
"ControlFlowGraph_visitDominatorTreeDefault_c5d62c152c81317cdd7fc9a072faf9ed426408e4",
"ConditionalEliminationPhase$Instance_enter_c2a4b926708dd3deda5cba677c743a177e05e63c",
"ConditionalEliminationPhase$Instance_enter_56b974d18cb38f6c7bb6d59b160a7bd8f0a7b847",
"ArrayDeque_circularClear_0482cd097ec391a2f3c109421eb9e65111b0c1c2",
"ControlFlowGraph_visitDominatorTreeDeferLoopExits_e295cab7838bd192044a722c8217c6b38173b5c2",
"ConditionalEliminationPhase$Instance_processNodes_9311a99647f5c06e67ae939b8b42609eeb1a1b37",
"ConditionalEliminationPhase$Instance_processNode_e219b648a3db95ba42ba007ed2728e9a97ca014c",
"ConditionalEliminationPhase$Instance_processGuard_3e6ebafa5e8f6445346516c7fd03a7b04c16d258",
"ConditionalEliminationUtil_tryProveGuardCondition_24103ba63ff64f1e1ea54cbbad0f0cc4923cd873",
"SchedulePhase_run_73b6d74b908f13116a838bb4805f66af971f50b4",
"LoopFullUnrollPhase_run_fa49ae0a6eda74dfc36e46b100ed7c0f62041711",
"LoopFullUnrollPhase_run_81b77adeb934f312297b17b0fcc1c71102afb186",
"LoopTransformations_fullUnroll_48134db102a930a88f18d7b2c28f2a2b467df8fe",
"GraphUtil$DefaultSimplifierTool_deleteBranch_68196ecbd6519600d7628b43a8f0139c2e37bde3",
"LoopPartialUnrollPhase_run_d88a47356b73f97c5630c60cd566d306ec2d526b",
"LoopPartialUnrollPhase_run_223018d196f2e79ce2cc4871b32231bd75803b54",
"LoopPartialUnrollPhase_unroll_8b5b7205f316da39f4787031c798aeaa6d08e2be",
"ReversePostOrder_pushOrStall_1c806a4b76f00b2f87ceb73f259db73b4c4313c7",
"LinkedList_linkFirst_37ab78a7cd0cb8a64957b2cba04b7927102ffeaf",
"LoopsData_detectedCountedLoops_4fcc3ac65eab370a61d436e16eba8fd3dee4c641",
"LoopEx_detectCounted_7359864d97e4ba185bdf591df7aedab6ed100593",
"LoopEx_isOutsideLoop_34df326b74401c232f3e26404c73f343a47e7c86",
"LoopFragment_contains_061d05ec2fdd39eeb24f14b987c6a7ec423a8048",
"LoopFragmentWhole_nodes_23c9a35d03b938811003a20188b5fc619dbf3631",
"LoopFragment_computeNodes_db7adf416dcb7ea05e793581d83fd713ae431c22",
"NodeUsageIterator_next_73a6d1dbaa7afdcd361226c45e649c8e962661ed",
"NodeUsageIterator_next_5b3e622ff0aa9c6905997aae7e7e50efdc57e1e5",
"LoweringPhase_run_13d1db40666a477f7cbe60102a36612201590fd4",
"LoweringPhase_run_244b35790703fa1f3a01ef579ce066e7ceaf1048",
"LoweringPhase_lower_9ffde41562053814346fa9ca2c05d95d6f24d4ad",
"CanonicalizerPhase_applyIncremental_251f976f5ed64cde665e9c11a4df29fff9331a89",
"Canonicalizable$Binary_canonical_e0dd9ce8faf78de3def662e9e7ce7bec0f81b90a",
"XorNode_canonical_48df1c8685e6e2214fab93f77eb7cacde782bad2",
"XorNode_canonical_995e862ae7c973e770a9223353b295cc4ba3bba5",
"BinaryArithmeticNode_getArithmeticOpTable_f653fb402df50c17c4d5ab4184dd5bd76d85892a",
"LoweringPhase$Round_run_1d304b777646f831133e25ca12e81b7e07fe0e9d",
"ArrayList_grow_10d37c6b46d51b6c5113d67b7886024e29da459b",
"SchedulePhase$Instance_processStack_8edc6d202912d9aaa05edb5e063e2748b1dd575b",
"SchedulePhase$Instance_processInputs_63bd5ecffb6776bee6ec6f6a29700f1fb35badd4",
"NodeClass$RawEdgesIterator_advanceInput_4bbf78cded2e737f55538ab17d845bd39dca09b0",
"SchedulePhase$Instance_sortNodesLatestWithinBlock_bd62477540a4a50f87b81128b8656bbee982076f",
"SchedulePhase$Instance_sortNodesLatestWithinBlock_d516c6148d799970886e3f489efa722c59cee42b",
"SchedulePhase$Instance_sortIntoList_115eb0a65cb67e9c070a36b26fcb19e6d4ebcda0",
"LoweringPhase_processBlock_b3e3f26ad1a2eb8a25e497438103eae21502d06e",
"LoweringPhase$Round_process_e148c9f0eaa142bae4181cbf02ddcb3a146b7569",
"Lowerable_lower_cca2f110e49bb9aa41bdb1c4342b12dd2b653cfc",
"AMD64HotSpotLoweringProvider_lower_0b535d03d00f0435dd471fd4f26b80d41c89f6e6",
"DefaultHotSpotLoweringProvider_lower_b8d7af9b6679b425acc0aeb2099026a58ea661b4",
"DefaultHotSpotLoweringProvider_lowerWithoutDelegation_f3a347975f45a50cc08449f5303ac51cabc38021",
"ArrayCopySnippets$Templates_lower_2b3bdd93ad27a076c68ab9cda464c588ac0e5379",
"ArrayCopySnippets$Templates_instantiate_ce1f6965011e1b2ffe26bef3d06884ea43066b85",
"SnippetTemplate$AbstractTemplates_template_6646c34d0b22fea9e70e6070b215f697ee5d7d47",
"SnippetTemplate_constructor_9a83c8413dd4f4f3ef242978687c90c10f9a28b1",
"ArrayCopySnippets$Templates_lower_e83a28d9ddc34cf769d50a03ad042d703d316b2e",
"StructuredGraph_getParameter_11f6869ab82ee642d33a70fab3de131c76022fb7",
"HotSpotAllocationSnippets$Templates_lower_9fa7d850a63ac16fcc2b74bb33e04e8dddc7dbdb",
"HotSpotReplacementsImpl_getSnippet_927acc987ce68588051e34baf3402d620e9054e1",
"EncodedSnippets_getEncodedSnippet_f22d608ad36bedfd791dcdb1e03633cdbe921216",
"EncodedSnippets_decodeSnippetGraph_d0bee8955db734547b5e9b8d30616180c00dc9ec",
"GraphDecoder_makeFixedNodeInputs_4f2b767489d5a0b5681e2fc77120fddeb82cae66",
"GraphDecoder_ensureNodeCreated_301fec5e44e5ed124c9889d55efc09b70f55e1e2",
"GraphDecoder_decodeFloatingNode_5e8f27a1e9d92fd0b8cca28427fef2645c5bdbb0",
"GraphDecoder_readProperties_558cde542134e13dc99f20e3653ff9b14378d94d",
"GraphDecoder_readObject_2c1846646729690af4bbdc036533fa0a9227323c",
"EncodedSnippets$SymbolicEncodedGraph_getObject_2d6c95b1ad4d4da07751a7df1158178de4b3b1fa",
"HotSpotAllocationSnippets$Templates_lower_d7d3727607d8e2dd12771a5b705c4ed6442e57eb",
"Graph_addDuplicates_70ebca74d42c5a73204c7d1caf159dfaf0130591",
"Graph_addDuplicates_07179be62d4c8bb8ff0d927f4adba34ae2f3bcdc",
"NodeClass_addGraphDuplicate_6e5d95df78cf047faf66a1157ecde278c56dc2c9",
"Graph$MapReplacement_replacement_8dcea42ca272080dbc91fadddd1000415321462e",
"EconomicMapImpl_get_7bb95a27d28b23947adf226439fe1bcab82e988f",
"EconomicMapImpl_findLinear_fbeb6065066369b24e23dde540fb269dda93c3d5",
"InstanceOfSnippetsTemplates_lower_e7dc56145cc61db2e0f27762e41162aa80226315",
"AbstractMergeNode_simplify_5791c7b356e0b0ea3009549ad63cf42ca4d27171",
"StructuredGraph_reduceTrivialMerge_d87de8eadd0156bbc005782b17050a39cb7bd4bd",
"Node_replaceAtUsagesAndDelete_e3184b998d88ee9b95f526f15a2e4e481ebfb5b3",
"Node_safeDelete_83c368437951d5a210158a34fe3b6a6b7cfe03f0",
"Node_markDeleted_f36d547a13fdfd0092f9e70d1230063b07f5c0c3",
"Graph_unregister_5704a3163f1d2c9cc1e478785305348f87db836a",
"ArrayList$Itr_next_bc70a890e1dcc46e3198eb86d01fef9762d1343b",
"FloatingReadPhase_mergeMemoryMaps_e0855fa0353bdf3093627f46e117e5c971751c38",
"OptionValues_get_81bff423947f63d24880abb6e6b3597eaa15beb0",
"OptionValues_get_941d920319d28ed6660b744487e496eedc6b882b",
"EconomicMapImpl_find_70589f86ac2abbc40566645a1af83af4aa5c89f0",
"BitSet_clear_791f3d87c54f66e9ea2270315b71434674a00977",
"JavaMethod_format_383e65b46c542413fe940cb84920e0e0ad4d482f",
"JavaType_toJavaName_54dbf0cd22c6ed1c5b3ed139795af7f81e697b45",
"MetaUtil_internalNameToJava_697a064ee9ed005e3af0c98c9982fdf106489342",
"MetaUtil_replacePackageSeparatorsWithDot_73bd28705393644523442a6bbfded9052dfbe524",
"WriteBarrier_lower_7b9bb8ce895a3abdfa737302e8535be5116a0a90",
"HotSpotG1WriteBarrierSnippets$Templates_lower_6f94ae25b9a4e2ed61ea8b73f9823c0bc31a5cb8",
"G1WriteBarrierSnippets$G1WriteBarrierLowerer_lower_cb631e6cadfde38cc53d40a5c3c4080961e52c13",
"SchedulePhase$Instance_checkWatchList_1ab76cca2f30ef586b0768d0fa009424aa932b7d",
"AbstractTypeReader_read_d4f5b54b39fc06dbff0b63752d02510f02224edf",
"SnippetTemplate_instantiate_d44982e3e30cfe13e031280817fe354f3560ed08",
"SnippetTemplate_inlineSnippet_95f214a9869dba5a34ca1f4e0098df96ccd4868a",
"NodeClass_updateInputSuccInPlace_d2b9f0a2c1702f6eac2552eb8900f63ed5f80bf1",
"NodeClass_updateEdgesInPlace_bdca85c71b2c4640c5bb85b97fc23b5eb846efc9",
"Edges_initializeNode_655db984dc0d683ce50132c19b390de11af9d0e6",
"Edges_verifyUpdateValid_75e14a962cd63d279b2c9c7013c70432633c774c",
"Node_addUsage_10bdfdb2b10726a773b9d84c8d0be0f952b23d5f",
"HotSpotG1WriteBarrierSnippets$Templates_lower_fa8a9ad63e65dc2893395b6a536242e5c6df5d38",
"G1WriteBarrierSnippets$G1WriteBarrierLowerer_lower_c6f79f564b740f15c5d5b6d53963194480861a27",
"NodeMap_get_1aaab408706471a258e9b2fa1616418b7c859cdf",
"PluginReplacementNode_HotSpotReplacementsUtil_g1YoungCardValue_replace_73cf1fd0aed17b03b9639003d984ee4f5a70d390",
"NodeClass$1_replacement_76a9392bd02cfea655b0c8d170b0a2f968306246",
"NodeMap_get_e35a2907d9057600bfa39010b925e6f1c9c6ab92",
"InliningUtil_updateSourcePosition_99d236e8f334576da0578051e150849f65cd873e",
"EconomicSet_addAll_46c5fa820022eed890a75f72275d120ab3d64fea",
"PartialEscapePhase_run_f88ed79b0084aa41ee5a5292ba857ec43e7be3a5",
"PartialEscapePhase_run_3df35e22289fd9cb0ee4d02d404c2d4f13b2d727",
"EffectsPhase_runAnalysis_54f9478d1b57872ffb93f7e08dfb56cfeaaba51c",
"ControlFlowGraph_identifyBlock_7f27028f31036b771721050156eba6ce33899dfa",
"SchedulePhase$Instance_processStackPhi_903dd3e1d50b761d993ba57fe5819280f9a33356",
"ReassociationPhase_run_709e86169dc60b4348cda8cbb43d380ea3e0b93d",
"ReassociationPhase_run_551ec02b8f2e4e39ae7860e7d3d3266cfb4ac645",
"ReassociationPhase_reassociateConstants_4f733d5077ebb329c5d0ca5873fb2667465d60f9",
"TypedGraphNodeIterator_next_aaa5cd43f31f3627e577daccae357aba4605074a",
"ReassociationPhase_reassociateInvariants_d34ee28245bd17064107d13dc7bc937170788157",
"LIRCompilerBackend_emitBackEnd_021a7e30d2cf9c7e175e805b12576b2faa968161",
"LIRCompilerBackend_emitLIR_71233f19aaaaeb8e4cb4993ed4c9e959063fbd71",
"LIRCompilerBackend_emitLIR0_1217baa260206070dfc8739e40eb2ee2ded71476",
"LIRCompilerBackend_emitLowLevel_4fe585e14b242597df0ab8ae485f3416fddc991d",
"LIRPhase_apply_f88294980b4069af9bbdf7490a29e7232cbb1793",
"DebugContext$1_close_e58281ec927def9d5ce7814284ecd643ded220c2",
"CompilationListenerProfiler$1_close_1fd53cf8212c2482077769d25db371f20aaa3c32",
"JFR$CompilerPhaseEvent_write_09914068489627deda1bc2d681c433dacfa31555",
"JFR$CompilerPhaseEvent_getPhaseToId_d13463e2ba31c6e1c8d653ab1c5c690a0c78accb",
"ConcurrentHashMap_computeIfAbsent_62235260c2bacb5055f48f5aef83cf2d011ff998",
"MultiThreadedMonitorSupport_slowPathMonitorEnter_5c2ec80c70301e1f54c9deef94b70b719d5a10f5",
"MultiThreadedMonitorSupport_monitorEnter_a853e48d8499fe94e7e0723447fc9d2060965e91",
"ReentrantLock$Sync_lock_0d92cfd028273dba0450296f819fde627e41289f",
"ReentrantLock$NonfairSync_initialTryLock_e73bacda47b2e33aa8d782dc8a83a7da0b62e2b9",
"LIRPhaseSuite_run_8261160fad1049c08835cb0ad391fe506cf85f32",
"LSStackSlotAllocator_run_46f0d6d05698703ea78c48301673aefc32a83b76",
"LSStackSlotAllocator_run_8731cbd7414b044238d60f6a424d76164f892d9a",
"LSStackSlotAllocator_allocateStackSlots_24708dec186d6148572db487df48d1fe33796e42",
"LSStackSlotAllocator$Allocator_allocate_8c68eb39cd06cb5f0798f69b101e8144f0953355",
"LSStackSlotAllocator$Allocator_buildIntervals_55cfd7fe557a5a3fa77deaa4a027104ce5fdf027",
"FixPointIntervalBuilder_build_ceb28e2ddd9ed1dbfe2a496adff9070454612a63",
"FixPointIntervalBuilder_processBlock_224b061976bad6a9efdc5fccd8bc53f8df6a44f2",
"FixPointIntervalBuilder_updateOutBlock_e3af4e37450dcad7f6e4570da7d327554a365d22",
"BitSet_equals_a69e2b570b76698975429b4597bf110a04c42081",
"LinearScanPhase_run_79455c1f7ffc284d11c8b4cb98025d89c480845f",
"LinearScanPhase_run_c8919ef88d01a6b33119dbe97a072c67e193e833",
"LinearScan_allocate_658ed41c42a38ac0b2130d41b18044d59fd18304",
"LinearScanAllocationPhase_apply_32ce9f2f5be753814b6f81202a57be6203e1a904",
"LinearScanAssignLocationsPhase_run_b76294429ee6f06308b11dcaea85813d761b2160",
"LinearScanAssignLocationsPhase_assignLocations_76d59b64271bb9d150ec726be646f399ddcc5f36",
"LinearScanAssignLocationsPhase_assignLocations_045ce786da80ffb0f95489c5c999466b548c5cd4",
"LinearScanAssignLocationsPhase_assignLocations_383010e4befd5396045d614eb767b9974f0a819f",
"LIRInstructionClass_forEachState_7d9e904ad698d87fb91795730cf96929cb9d69f6",
"LIRFrameState_forEachState_37f671d46584ca9406e2fd2e434d86975b77efe3",
"LIRFrameState_processValues_83e5099919641bd6075e08b4aa3235536fb89d4b",
"LinearScanAssignLocationsPhase$2_doValue_03cf35cc7dfd23b303d4e835e96bdd6f4a515fae",
"LinearScanAssignLocationsPhase_debugInfoProcedure_4262582ff3926c9c3cce1634ba58d5b236e15a8d",
"LinearScanAssignLocationsPhase_colorLirOperand_7affc7c3873fbf792436834a819fc3439c67eb50",
"LinearScan_splitChildAtOpId_22e002d9441184c68b60b41d1edbcec8a7064a18",
"Interval_getSplitChildAtOpId_55aff9c8216169c804da90ae986c66fdb928a25f",
"LinearScanLifetimeAnalysisPhase_run_ab4cb4dbd758d5d3c0e354e191b311860fe58b52",
"LinearScanLifetimeAnalysisPhase_buildIntervals_0cb08519c3ed66232ec4bd817bfad2d3b8a98bd7",
"LinearScanLifetimeAnalysisPhase_addUse_5921361d76f0d026c25190341a99f41d6ce7fc35",
"LinearScanLifetimeAnalysisPhase_computeGlobalLiveSets_e6a4f5781fea5c5071804c3a51584432ebc4c0d7",
"LinearScan_getBlockData_8cad76016ea42ce9f9a602d7326647941d5dc3d9",
"LinearScanOptimizeSpillPositionPhase_run_ba0b3084d175daa7a09955101354c58e4f015a3b",
"LinearScanOptimizeSpillPositionPhase_optimizeSpillPosition_47c38bc2f5bb8a9e2e74069d62de542acdb97cfc",
"LinearScanOptimizeSpillPositionPhase_optimizeInterval_ab9c3f98be02216432f2ac18e0058c2d16021018",
"LinearScanOptimizeSpillPositionPhase$IntervalBlockIterator_next_da9e07ef4c88f1487689b4815a6bba48cbd297d2",
"LinearScan_getFirstLirInstructionId_dfee0444271cff501068fa6a1f040d9808fb2ec3",
"LIR_getLIRforBlock_f63c8cae7fa72ab47de364c84c6bc3f73baeb847",
"LinearScanRegisterAllocationPhase_run_6ab54be04aa1e3a17f05570bc91bc24f764052c2",
"LinearScanRegisterAllocationPhase_allocateRegisters_87b4a3b4f34ffb485e8f50f2f43c018d2412b742",
"IntervalWalker_walk_35e85874dbea90f461b8fd84a3c5ea9d2ac4d1df",
"IntervalWalker_walkTo_2fc8b7007f4f05d539150787e7af14224d089e80",
"LinearScanWalker_activateCurrent_ef9194e0b83b6b02a8444ac9564d8313aced6638",
"LinearScanWalker_allocLockedRegister_ed9731a80a572d0cb56570b186364737adca8a0e",
"LinearScanWalker_spillCollectInactiveAny_4b148a2b4621badf8dd4119af6b4057d591cc44a",
"Interval_to_ab02a31a0a188ea0af5a6d4b3528996409c63c06",
"LinearScanWalker_initVarsForAlloc_2e97f360f21e575e2e0554c794362090774a553e",
"RegisterAllocationConfig_getAllocatableRegisters_e840d9312d3061825949c2c90e6215afbf3919b0",
"EconomicMapImpl_compareKeys_139d60c35d64f232b5b9fac87391585f45801e09",
"LinearScanResolveDataFlowPhase_run_2b8b6ed2741679a512c4596223767d05ce8b0465",
"LinearScanResolveDataFlowPhase_resolveDataFlow_685fe0ba308356e8e8977981cc22570b9f63478e",
"LinearScanResolveDataFlowPhase_optimizeEmptyBlocks_6ecd506273029531819ac115947b67e7cfac875b",
"SSALinearScanResolveDataFlowPhase_resolveCollectMappings_9539321dd0bf1324454d4bd973f42f110b48abbc",
"LinearScanResolveDataFlowPhase_resolveCollectMappings_ec05a0262324f2ee642d5278d5ef484672cb31b7",
"MoveResolver_addMapping_6b10768378c1fe6d1e2e9b700585ef04091e75fa",
"LinearScanResolveDataFlowPhase_resolveDataFlow0_0e0e8b538b9d0bf3917106c5a4b8e38a32411f08",
"BitSet_clear_bcce0972b0162f2e026e76b83fb9e44f78853baa",
"LocationMarkerPhase_run_fe81250e2d4013f193a70d3739f620b7ed674a66",
"LocationMarkerPhase_run_177f2ed1607040e2f7febd72a3d115f102760f42",
"LocationMarker_build_a6cd99174579f4dccf1dc395c13bc76b2856238a",
"LocationMarker_processBlock_8e2b0576595ceabe40c7c78c30933bd9a445b0bd",
"LocationMarker_processInstructionBottomUp_196853667b9514893f241d9f16e7f40be7915b09",
"LIRIntrospection_visitEach_28a8f0d7040ecdb3aeceb75e6eb9d4b16f2fc5bb",
"ValueConsumer_visitValue_b0b89647b2f611d27c39ebc08d2592f9008541cf",
"LocationMarker$3_visitValue_2431dc55a05821d00f601accdc5d9d6d4c20c9f4",
"RegStackValueSet_remove_398a66212c441193da578c4b4c96f6fbfc9b44d2",
"MarkBasePointersPhase_run_1bb24831216014c069f5ddcad78bcf014afbc5ce",
"MarkBasePointersPhase_run_b4c3c7d1d496941f9027cefd507f34cf61c3368f",
"AMD64AddressValue_visitEachComponent_fdcc98ee53417c0d912631063e335e676797c5c1",
"LocationMarker$2_visitValue_92f3247290dd2cace603c13f23f890cf306eaf4f",
"MarkBasePointersPhase$Marker_shouldProcessValue_5f282ac459391e6c697cbd90e52ec593dabcf4ca",
"RedundantMoveElimination_run_e6599a508810bb546bdd83a918228ee0569f4443",
"RedundantMoveElimination_run_8e5a069070bbf7278af28439c381ee358062dc15",
"RedundantMoveElimination$Optimization_doOptimize_1378ad605ce8e7305ced13374b32214764590c27",
"RedundantMoveElimination$Optimization_solveDataFlow_e4a10926328f7022d113331c0c15f1c293ab4386",
"LIRGenerationPhase_run_1168e036e71ef03e6dc18353b13e37ba25b2a72e",
"LIRGenerationPhase_run_34d05efdd4b829f90fa75600fde34611b9de1909",
"LIRGenerationPhase_emitBlock_b1af2b6ad6d34d4c506cd38df7e1e3f393cfd111",
"NodeLIRBuilder_doBlock_8c06e34b0350e6248550dc28993743b7a85b75fa",
"NodeLIRBuilder_doRoot_893017f47f5cdc4e711039b8f127be550e81d644",
"NodeLIRBuilder_emitNode_f3d545ee582c3dc3292bbf4e9505280ca370ad52",
"ArithmeticLIRLowerable_generate_ab4dc950256eb3deee03fa6dc04cbf68e252e383",
"SubNode_generate_b2a163a65c08a9695abea45bf5f350b685021e46",
"ArithmeticLIRGenerator_emitAddOrSub_d2d74681e48c0c985c0b1cf6f8854ddf5682cc25",
"ForeignCall_generate_a8437761762737ecc45948778e3b7f87158bffd3",
"NodeLIRBuilder_emitForeignCall_36399f0ad219b4f6fa3a77195796aee9d1bda2b9",
"HotSpotForeignCallsProviderImpl_lookupForeignCall_65ba6153c969df1538691455ed7ba0dc50de7d27",
"HotSpotForeignCallLinkageImpl_finalizeAddress_e79b3575420254afead03ca7a31c9bbbf90f2af6",
"Stub_getCode_c338a76f9dfb0ffb71d901428c804b57b6816931",
"Stub_buildCompilationResult_f45ee03e58907f484a142b09a6c7219207405ef9",
"LIRCompilerBackend_emitCode_235ba9ed9f89d43dc1bbfaee3a004366819d08a7",
"AMD64HotSpotBackend_emitCode_263a1fea07c01e15409a2cbdbd551df24299ea04",
"CompilationResultBuilder_emit_7846c4e4cada644f9a51defb344149c50daf8ba7",
"CompilationResultBuilder_emitBlock_7f941104d58cb747e0579e1f89a9925ee6b58512",
"CompilationResultBuilder_emitOp_a5225928ead0349452d0c30c5076087cebc23d5a",
"AMD64LIRInstruction_emitCode_528b5de76cbcf2d8c2f695d28266f471c083f509",
"AMD64ArrayIndexOfOp_emitCode_a733ccdc6753a15daa90f54692b01e0f5230b773",
"AMD64Assembler_jccb_d93c1d54cd7f7c80a955ed84146b8e3767ff8a93",
"Label_addPatchAt_a5f9278856016ebef16daa4d791a2b2dc13c1448",
"NodeLIRBuilder_getOperand_490a5ba7c8ca2a3c7c6bad3c4d6eef73a963de46",
"NodeLIRBuilder_matchBlock_e47b4d7161652089824be11c2fd9aaaff730574b",
"NodeLIRBuilder_matchComplexExpressions_7976f1012eaff26bd67667645413942e2ade8306",
"ArrayList_get_a2422c2de241cd61c68639491cbc7f5cb988db41",
"ServiceThread::service_thread_entry(JavaThread*, JavaThread*)",
"JvmtiExport::post_compiled_method_load(nmethod*)",
"JvmtiExport::post_compiled_method_load(JvmtiEnv*, nmethod*)",
"create_inline_record(nmethod*)",
"ScopeDesc::sender() const",
"ScopeDesc::decode_body()",
"resource_allocate_bytes(unsigned long, AllocFailStrategy::AllocFailEnum)",
"VMThread::run()",
"VMThread::inner_execute(VM_Operation*)",
"SafepointSynchronize::end()",
"VMThread::evaluate_operation(VM_Operation*)",
"VM_Operation::evaluate()",
"VM_G1CollectForAllocation::doit()",
"G1CollectedHeap::do_collection_pause_at_safepoint(double)",
"G1CollectedHeap::do_collection_pause_at_safepoint_helper(double)",
"G1CollectedHeap::evacuate_initial_collection_set(G1ParScanThreadStateSet*, bool)",
"WorkGang::run_task(AbstractGangTask*, unsigned int, bool)",
"semaphore_signal_trap",
"G1CollectedHeap::post_evacuate_collection_set(G1EvacuationInfo&, G1RedirtyCardsQueueSet*, G1ParScanThreadStateSet*)",
"G1CollectedHeap::post_evacuate_cleanup_2(PreservedMarksSet*, G1RedirtyCardsQueueSet*, G1EvacuationInfo*, unsigned long const*)",
"G1BatchedGangTask::~G1BatchedGangTask()",
"G1PostEvacuateCollectionSetCleanupTask2::FreeCollectionSetTask::~FreeCollectionSetTask()",
"G1Policy::phase_times() const",
"G1GCPhaseTimes::print()",
"G1GCPhaseTimes::print_post_evacuate_collection_set() const",
"ReferenceProcessorPhaseTimes::print_all_references(unsigned int, bool) const",
"ReferenceProcessorPhaseTimes::print_phase(ReferenceProcessor::RefProcPhases, unsigned int) const",
"outputStream::print_cr(char const*, ...)",
"outputStream::do_vsnprintf(char*, unsigned long, char const*, __va_list_tag*, bool, unsigned long&)",
"os::vsnprintf(char*, unsigned long, char const*, __va_list_tag*)",
"[unknown]",
"_platform_memmove$VARIANT$Haswell",
"G1MonitoringScope::G1MonitoringScope(G1MonitoringSupport*, bool, bool)",
"TraceMemoryManagerStats::TraceMemoryManagerStats(GCMemoryManager*, GCCause::Cause, bool, bool, bool, bool, bool, bool, bool, bool)",
"GCMemoryManager::gc_begin(bool, bool, bool)",
"Management::timestamp()",
"TimeStamp::update()",
"os::elapsed_counter()",
"G1ParScanThreadStateSet::G1ParScanThreadStateSet(G1CollectedHeap*, G1RedirtyCardsQueueSet*, unsigned int, unsigned long, unsigned long)",
"AllocateHeap(unsigned long, MEMFLAGS, AllocFailStrategy::AllocFailEnum)",
"os::malloc(unsigned long, MEMFLAGS, NativeCallStack const&)",
"VMThread::wait_for_operation()",
"WatcherThread::run()",
"WatcherThread::sleep() const",
"internal_catch_exc_subsystem",
"user$eval27292.invoke",
"user$eval27292.invokeStatic",
"user$eval27292$fn__27365.invoke",
"user$eval27292$fn__27365$fn__27366.invoke",
"user$eval27292$fn__27365$fn__27398.invoke",
"clojure.core/apply",
"clojure.lang.RestFn.applyTo",
"clojure.test/run-tests",
"clojure.lang.RT.boundedLength",
"clojure.lang.Cons.next",
"clojure.lang.LazySeq.seq",
"clojure.lang.LazySeq.sval",
"clojure.core/map/fn--5935",
"clojure.lang.RestFn.invoke",
"clojure.lang.AFunction$1.doInvoke",
"leiningen.core.injected/prepare-for-hooks/fn--27224/fn--27225",
"leiningen.core.injected/run-hooks",
"leiningen.core.injected/compose-hooks/fn--27219",
"clojure.lang.AFn.applyTo",
"clojure.lang.AFn.applyToHelper",
"user$eval27292$fn__27355.invoke",
"clojure.test/test-ns",
"clojure.test/test-all-vars",
"clojure.test/test-vars",
"clojure.test/default-fixture",
"clojure.test/test-vars/fn--9882",
"clojure.test/test-vars/fn--9882/fn--9887",
"clojure.test/test-var",
"clojure.test/test-var/fn--9856",
"piotr-yuxuan.welcome-base-api.tick-test/fn--32798",
"piotr-yuxuan.welcome-base-api.tick-test/fn--32798/fn--32818",
"piotr-yuxuan.welcome-base-api.tick-test/fn--32798/fn--32818/fn--32819",
"clj-async-profiler.core/stop",
"clj-async-profiler.core/status",
"clojure.core/slurp",
"clojure.java.io/copy",
"clojure.lang.MultiFn.invoke",
"clojure.java.io/fn--11659",
"java.io.Reader.read",
"java.io.BufferedReader.read",
"I2C/C2I adapters",
"clojure.lang.Var.getRawRoot",
"piotr-yuxuan.welcome-base-api.tick-test/fn--32798/thunk--32799",
"piotr-yuxuan.welcome-base-api.tick/value",
"java.lang.Integer.valueOf",
"java.math.BigDecimal.divide",
"java.math.BigDecimal.divideAndRound",
"java.math.BigDecimal.needIncrement",
"java.math.BigDecimal.valueOf",
"java.math.BigDecimal.longMultiplyPowerTen",
"java.math.BigDecimal.intValue",
"java.math.BigDecimal.subtract",
"java.math.BigDecimal.add",
"JVMCIRuntime::new_instance_common(JavaThread*, Klass*, bool)",
"InstanceKlass::allocate_instance(JavaThread*)",
"MemAllocator::allocate() const",
"MemAllocator::allocate_inside_tlab_slow(MemAllocator::Allocation&) const",
"G1CollectedHeap::allocate_new_tlab(unsigned long, unsigned long, unsigned long*)",
"G1Allocator::attempt_allocation(unsigned long, unsigned long, unsigned long*)",
"ObjAllocator::initialize(HeapWordImpl**) const",
"java.math.BigDecimal.checkScale",
"java.lang.Math.abs",
];
var reverse = false;
var initialStacks = [];
var stacks;

var _lastInsertedStack = null;

function a(frameIds, samples) {
  var same = frameIds[0];
  var frames = (same > 0) ? _lastInsertedStack.slice(0,same) : [];

  for (var i = 1, len = frameIds.length; i < len; i++) {
    frames.push(idToFrame[frameIds[i]]);
  }

  _lastInsertedStack = frames;
  initialStacks.push({stackStr: frames.join(";"), samples: samples});
}

var totalSamplesA = 0, totalSamplesB = 0;

function d(frameIds, samples_a, samples_b) {
  var same = frameIds[0];
  var frames = (same > 0) ? _lastInsertedStack.slice(0,same) : [];

  for (var i = 1, len = frameIds.length; i < len; i++) {
    frames.push(idToFrame[frameIds[i]]);
  }

  totalSamplesA += samples_a;
  totalSamplesB += samples_b;

  _lastInsertedStack = frames;
  initialStacks.push({stackStr: frames.join(";"),
                      samples_a: samples_a, samples_b: samples_b});
}

function _extractRegexPrefix(s) {
  let parsed = s.match(/^\/\.\+(.+)\/g$/);
  if (parsed != null) {
    return new RegExp(parsed[1]);
  }
}

function _stringToMaybeRegex(s) {
  if (s == null) return null;
  let parsed = s.match(/^\/(.+)\/$/);
  if (parsed != null)
    return new RegExp(parsed[1], 'g');
  else
    return s;
}

function _makeTransform(type, enabled, what, replacement) {
  let what2 = (typeof(what) == 'string') ? _stringToMaybeRegex(what) : what;
  let prefix = (what2 instanceof RegExp) ?
      _extractRegexPrefix(what2.toString()) : null;
  if (type == 'replace')
    return { type: type, enabled: enabled, what: what2, replacement: replacement, prefix: prefix}
  else
    return { type: type, enabled: enabled, what: what2}
}

var userTransforms = [];

function match(string, obj) {
  if (typeof(obj) == 'string') {
    return string.includes(obj);
  } else
    return string.match(obj);
}

function applyReplacement(string, what, replacement, prefix) {
  var s = string;
  if (prefix != null) {
    let match = prefix.exec(string);
    if (match == null)
      return s;
    else
      s = string.substring(Math.max(match.index-1, 0));
  }
  return s.replaceAll(what, replacement);
}

function transformStacks() {
  console.time("transformStacks");
  let diff = isDiffgraph;
  var result;
  if (userTransforms.length > 0) {
    var xformedMap = {};
    for (var i = 0; i < initialStacks.length; i++) {
      var stack = initialStacks[i];
      var xformedStr = stack.stackStr;
      var useIt = true;

      for (var t = 0; t < userTransforms.length; t++) {
        const transform = userTransforms[t];
        if (transform.enabled && transform.what != '') {
          if (transform.type == 'replace') {
            xformedStr = applyReplacement(xformedStr, transform.what,
                                          transform.replacement, transform.prefix);
          } else if (transform.type == 'filter') {
            if (!match(xformedStr, transform.what))
              useIt = false;
          } else if (transform.type == 'remove') {
            if (match(xformedStr, transform.what))
              useIt = false;
          }
        }
        if (!useIt) break;
      }

      if (useIt)
        if (diff) {
          let newVal = (xformedMap[xformedStr] || {});
          newVal.samples_a = (newVal.samples_a || 0) + stack.samples_a;
          newVal.samples_b = (newVal.samples_b || 0) + stack.samples_b;
          xformedMap[xformedStr] = newVal;
        } else
          xformedMap[xformedStr] = stack.samples + (xformedMap[xformedStr] || 0);
    }

    var xformedStacks = [];
    for (xformedStr in xformedMap) {
      if (diff) {
        let val = xformedMap[xformedStr];
        xformedStacks.push({stackStr: xformedStr, samples_a: val.samples_a, samples_b: val.samples_b})
      } else
        xformedStacks.push({stackStr: xformedStr, samples: xformedMap[xformedStr]});
    }
    result = xformedStacks;
  } else
    result = initialStacks;

  console.timeEnd("transformStacks");
  return result;
}

console.time("data exec time");

  a([0,0,1,],1);
a([0,2,3,4,5,6,7,8,9,10,11,],3);
a([4,12,13,14,15,16,],1);
a([7,17,18,19,],2);
a([6,20,21,22,23,],3);
a([9,24,9,10,11,],1);
a([10,25,26,27,],1);
a([7,28,29,30,31,],1);
a([8,32,33,34,],4);
a([10,35,36,37,38,39,40,41,42,],1);
a([17,43,],1);
a([7,44,45,46,47,48,49,50,],1);
a([6,51,],1);
a([6,52,],7);
a([4,53,54,55,56,57,58,59,60,61,62,63,64,65,66,],1);
a([7,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,],1);
a([26,89,90,91,92,],1);
a([27,93,94,95,96,],1);
a([26,97,90,98,],1);
a([26,99,100,],1);
a([25,101,102,43,],1);
a([19,103,104,105,106,107,108,109,108,110,111,112,113,114,115,116,117,],1);
a([27,118,119,120,121,122,123,124,],1);
a([31,125,126,],1);
a([27,127,128,108,129,130,131,114,115,132,],1);
a([35,116,133,],1);
a([33,134,135,136,137,138,],1);
a([29,139,108,140,120,121,122,141,142,143,144,145,146,147,148,149,150,151,152,153,],1);
a([29,154,155,],1);
a([27,156,157,158,159,160,161,162,163,164,165,],1);
a([27,166,167,168,169,170,],1);
a([29,171,131,134,172,173,174,],1);
a([27,175,176,109,108,177,178,179,180,181,182,183,184,185,186,187,188,],1);
a([31,140,189,190,191,192,193,190,191,192,193,190,194,195,196,197,198,185,186,187,199,],1);
a([27,200,201,202,203,204,205,206,207,208,209,210,114,211,212,213,214,149,150,151,],1);
a([39,115,116,215,216,],1);
a([34,210,217,210,217,210,114,115,],1);
a([29,218,219,220,221,210,210,114,115,116,133,222,],1);
a([31,223,224,225,226,227,228,229,230,231,232,233,234,235,],1);
a([30,236,237,238,],1);
a([32,239,240,108,118,119,120,121,122,141,],1);
a([35,109,108,156,157,158,159,160,241,242,243,244,245,],1);
a([42,246,247,248,249,250,251,252,253,254,255,256,],1);
a([46,257,258,259,260,261,262,263,264,265,],1);
a([46,266,267,259,268,269,270,271,272,273,274,275,276,277,278,279,280,281,],1);
a([46,282,283,284,259,260,285,],1);
a([46,286,287,288,289,290,291,292,],1);
a([44,293,294,],1);
a([31,295,296,297,298,],1);
a([30,299,300,204,205,206,210,114,211,301,302,],1);
a([36,210,217,210,210,217,210,114,211,212,303,304,305,306,307,308,],1);
a([32,309,310,311,312,],1);
a([27,313,314,108,315,316,317,318,319,320,321,],1);
a([33,322,319,320,323,324,325,326,],1);
a([32,327,131,134,132,],1);
a([27,328,329,330,142,331,144,145,136,],1);
a([27,332,333,334,113,114,211,212,],1);
a([32,115,116,133,335,336,],1);
a([30,337,338,339,340,341,342,151,343,344,308,],1);
a([27,345,346,347,108,175,176,348,108,140,120,121,122,141,349,350,351,352,],1);
a([39,123,124,136,137,138,],1);
a([33,109,108,140,353,108,129,130,131,114,115,116,215,216,354,],1);
a([41,134,135,355,356,136,137,357,],1);
a([47,138,],1);
a([41,358,359,360,360,136,137,357,],1);
a([37,361,362,],1);
a([39,363,364,365,366,367,368,369,370,108,313,314,108,315,316,114,211,212,],1);
a([43,371,368,369,370,108,345,346,347,108,175,176,109,108,140,353,108,129,130,131,134,],1);
a([47,372,],1);
a([43,373,369,370,374,375,376,272,273,274,377,378,379,380,381,382,],1);
a([43,383,369,370,384,385,386,387,388,389,],1);
a([43,390,369,370,108,118,119,120,121,122,141,391,392,393,394,395,396,],1);
a([47,345,346,347,108,175,176,109,108,140,353,108,129,130,131,134,135,136,137,],1);
a([61,358,359,397,],1);
a([63,360,],1);
a([46,398,255,256,399,400,388,401,389,],1);
a([46,374,375,376,272,273,274,402,],1);
a([48,403,404,405,406,],1);
a([39,407,364,365,366,408,409,369,370,108,345,346,347,108,175,176,109,108,140,353,108,129,130,131,358,359,410,],1);
a([47,374,375,376,272,273,274,377,378,411,],1);
a([45,412,413,384,385,386,414,415,416,417,],1);
a([52,185,418,],1);
a([43,419,420,369,370,108,175,176,109,108,140,189,190,194,195,],1);
a([48,345,346,347,108,175,176,109,108,140,353,108,129,130,131,134,421,222,],1);
a([63,135,355,132,],1);
a([47,374,375,376,272,273,274,275,276,277,422,],1);
a([45,412,413,384,385,386,414,415,423,424,421,],1);
a([47,425,426,310,311,],1);
a([27,427,428,429,108,129,130,131,114,115,430,],1);
a([34,134,135,355,356,136,137,],1);
a([37,431,],1);
a([27,432,433,434,341,342,151,152,153,],1);
a([30,113,114,115,435,172,],1);
a([29,436,113,114,211,212,],1);
a([27,129,130,131,134,135,136,137,],1);
a([30,358,359,],1);
a([23,437,438,439,440,441,442,443,444,445,446,447,448,449,450,],1);
a([28,451,441,],1);
a([30,452,453,454,455,456,457,458,459,460,],1);
a([30,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,],1);
a([34,477,478,479,],1);
a([35,480,481,],1);
a([34,482,483,484,485,486,487,],1);
a([34,488,489,490,491,492,493,494,495,],1);
a([39,496,497,388,401,389,498,],1);
a([34,499,500,501,502,503,475,476,],1);
a([39,504,],1);
a([36,505,506,],1);
a([30,507,508,509,510,511,],1);
a([35,512,513,514,515,],1);
a([30,516,517,509,510,511,512,518,513,519,520,],1);
a([30,521,522,523,524,397,],1);
a([26,441,525,526,527,528,529,530,531,532,533,],1);
a([33,534,535,536,537,538,539,437,540,541,542,543,544,545,546,547,548,216,],1);
a([32,549,],1);
a([29,550,551,552,],1);
a([5,553,554,555,556,557,558,559,],1);
a([4,560,561,562,25,],1);
a([6,563,564,565,566,567,568,16,],1);
a([12,569,570,],1);
a([11,571,572,573,574,574,575,],1);
a([11,576,577,578,579,580,581,582,583,583,583,583,584,],1);
a([11,585,586,587,588,589,590,50,],1);
a([11,591,592,593,583,583,],1);
a([5,594,9,10,11,],1);
a([4,595,596,9,597,],1);
a([7,10,11,],7);
a([8,3,597,],1);
a([0,598,599,600,601,602,603,604,605,603,604,606,607,608,609,610,611,612,604,613,614,603,604,615,603,616,617,618,619,620,621,622,623,622,624,625,626,627,628,629,],71);
a([39,630,631,611,632,611,633,634,635,636,637,638,],1);
a([39,639,],17);
a([39,640,],79);
a([40,641,],124);
a([41,642,],97);
a([41,643,643,],31);
a([43,643,],33);
a([44,644,],635);
a([45,645,],24);
a([45,646,646,],37);
a([44,647,],26);
a([41,648,],80);
a([41,649,],32);
a([42,650,],30);
a([43,651,652,653,654,655,656,],2);
a([46,657,],1);
a([45,657,],1);
a([43,650,650,],57);
a([44,646,],93);
a([43,658,],16);
a([43,647,],52);
a([44,659,],41);
a([39,641,],77);


console.timeEnd("data exec time");


function makeTreeNode() {
  if (isDiffgraph)
    return {self_samples_a: 0, self_samples_b: 0, self_delta: 0,
            total_samples_a: 0, total_samples_b: 0, total_delta: 0,
            delta_abs: 0, children: {}};
  else
    return {self: 0, total: 0, children: {}};
}

function getChildNode(node, childTitle) {
  var children = node.children;
  var child = children[childTitle];
  if (child == undefined) {
    child = makeTreeNode();
    children[childTitle] = child;
  }
  return child;
}

function parseStacksToTreeSimple(stacks, treeRoot) {
  console.time("parseStacksToTreeSimple");
  var depth = 0;
  for (var i = 0, len = stacks.length; i < len; i++) {
    var stack = stacks[i];
    var stackframes = stack.stackStr.split(";");
    var stackLen = stackframes.length;
    depth = Math.max(depth, stackLen);
    var node = treeRoot;
    if (reverseGraph) {
      for (var j = stackLen-1; j >= 0; j--) {
        var stackframe = stackframes[j];
        node.total += stack.samples;
        node = getChildNode(node, stackframe);
      }
    } else {
      for (var j = 0; j < stackLen; j++) {
        var stackframe = stackframes[j];
        node.total += stack.samples;
        node = getChildNode(node, stackframe);
      }
    }
    node.total += stack.samples;
    node.self += stack.samples;
  }
  console.timeEnd("parseStacksToTreeSimple");
  return depth;
}

function parseStacksToTreeDiffgraph(stacks, treeRoot) {
  console.time("parseStacksToTreeDiffgraph");
  var depth = 0;

  for (var i = 0, len = stacks.length; i < len; i++) {
    var stack = stacks[i];
    var stackframes = stack.stackStr.split(";");
    var stackLen = stackframes.length;
    depth = Math.max(depth, stackLen);
    var node = treeRoot;

    var samplesA = stack.samples_a;
    var samplesB = stack.samples_b;
    if (normalizeDiff) samplesB = Math.round(samplesB * b_scale_factor);
    var delta = samplesB - samplesA;


    if (reverseGraph) {
      for (var j = stackLen-1; j >= 0; j--) {
        var stackframe = stackframes[j];
        node.total_samples_a += samplesA;
        node.total_samples_b += samplesB;
        node.total_delta += delta;
        node.delta_abs += Math.abs(delta);
        node = getChildNode(node, stackframe);
      }
    } else {
      for (var j = 0; j < stackLen; j++) {
        var stackframe = stackframes[j];
        node.total_samples_a += samplesA;
        node.total_samples_b += samplesB;
        node.total_delta += delta;
        node.delta_abs += Math.abs(delta);
        node = getChildNode(node, stackframe);
      }
    }
    node.self_samples_a += samplesA;
    node.self_samples_b += samplesB;
    node.self_delta += delta;
    node.delta_abs += Math.abs(delta);
  }
  console.timeEnd("parseStacksToTreeDiffgraph");
  return depth;
}

function parseStacksToTree(stacks, treeRoot) {
  if (isDiffgraph)
    return parseStacksToTreeDiffgraph(stacks, treeRoot);
  else
    return parseStacksToTreeSimple(stacks, treeRoot);
}

const palette = {
  green: "#50e150",
  aqua: "#50bebe",
  orange: "#e17d00",
  yellow: "#c8c83c",
  red: "#e15a5a",
  clojure_green: "#91dc51",
  clojure_blue: "#8fb5fe",
};

function getColor(title) {
  if (title.endsWith("_[j]")) {
    return palette.green;
  } else if (title.endsWith("_[i]")) {
    return palette.aqua;
  } else if (title.endsWith("_[k]")) {
    return palette.orange;
  } else if (title.includes("::") || title.startsWith("-[") || title.startsWith("+[")) {
    return palette.yellow;
  } else if (title.includes("/")) { // Clojure (will only work after unmunging)
    return palette.clojure_blue;
  } else if (title.includes(".")) { // Java (if it has a dot and is not Clojure)
    return palette.clojure_green;
  } else return palette.red;
}

function decToHex(n) {
  var hex = n.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function getDiffColor(isRed, intensity) {
  return "hsl(" + ((isRed) ? 0 : 220) + ",100%," + Math.round(90 - intensity * 30) + "%)";
  // return "hsl(" + ((isRed) ? 0 : 220) + "," + Math.round(100 * intensity) + "%, 60%)";
}

function scaleColorMap(colorMap, intensity) {
  return '#' + decToHex(intensity * colorMap.red) +
    decToHex(intensity * colorMap.green) + decToHex(intensity * colorMap.blue);
}

var stacks, tree, levels, depth;

var smallestPixelsPerSample, minPixelsPerFrame = 0.25, minSamplesToShow;

function generateLevelsSimple(levels, node, title, level, x, minSamplesToShow) {
  var left = x;

  levels[level] = levels[level] || [];
  if (node.total >= minSamplesToShow) {
    levels[level].push({left: left, width: node.total, color: getColor(title),
                        title: title});

    left += node.self;

    let children = Object.entries(node.children);
    if (sortByNameRadio.checked)
      children.sort((a, b) => a[0].localeCompare(b[0]));
    else
      children.sort((a, b) => b[1].total - a[1].total);

    for (let i in children) {
      let title = children[i][0];
      let child = children[i][1];
      generateLevelsSimple(levels, child, title, level+1, left, minSamplesToShow);
      left += child.total;
    }
  }
}

function generateLevelsDiffgraph(levels, node, title, level, x, minSamplesToShow) {
  var left = x;

  levels[level] = levels[level] || [];
  if (node.delta_abs >= minSamplesToShow) {
    var change = (node.total_samples_a == 0) ? 1.0 : node.total_delta / node.total_samples_a;
    var color = getDiffColor((node.total_delta > 0), Math.min(Math.abs(change), 1.0));
    levels[level].push({left: left, width: node.delta_abs,
                        self_samples_a: node.self_samples_a,
                        self_samples_b: node.self_samples_b,
                        self_delta: node.self_delta,
                        total_samples_a: node.total_samples_a,
                        total_samples_b: node.total_samples_b,
                        total_delta: node.total_delta,
                        color: color,
                        title: title});

    left += Math.abs(node.self_delta);

    let children = Object.entries(node.children);
    if (sortByNameRadio.checked)
      children.sort((a, b) => a[0].localeCompare(b[0]));
    else
      children.sort((a, b) => b[1].delta_abs - a[1].delta_abs);

    for (let i in children) {
      let title = children[i][0];
      let child = children[i][1];
      generateLevelsDiffgraph(levels, child, title, level+1, left, minSamplesToShow);
      left += child.delta_abs;
    }
  }
}

function generateLevels(levels, node, title, level, x, minSamplesToShow) {
  if (isDiffgraph)
    generateLevelsDiffgraph(levels, node, title, level, x, minSamplesToShow);
  else
    generateLevelsSimple(levels, node, title, level, x, minSamplesToShow);
}

function refreshData() {
  if (isDiffgraph && normalizeDiff)
    b_scale_factor = totalSamplesA / totalSamplesB;

  stacks = transformStacks();

  tree = makeTreeNode();

  depth = parseStacksToTree(stacks, tree);
  smallestPixelsPerSample = canvasWidth / (tree.total || tree.delta_abs);
  minSamplesToShow = minPixelsPerFrame / smallestPixelsPerSample;

  levels = [];
  generateLevels(levels, tree, "all", 0, 0, minSamplesToShow);
  depth = levels.length;
}

refreshData();

var canvasHeight;

function initCanvas() {
  canvasHeight = (depth + 1) * 16;
  canvas.style.width = canvasWidth + 'px';
  canvas.width = canvasWidth * (devicePixelRatio || 1);
  canvas.height = canvasHeight * (devicePixelRatio || 1);
  if (devicePixelRatio) c.scale(devicePixelRatio, devicePixelRatio);
  c.font = document.body.style.font;
}

initCanvas();
isNormalizedDiv.style.display = isDiffgraph ? 'inherit' : 'none';

var highlightPattern = null, currentRootFrame, currentRootLevel, px;

function render(newRootFrame, newLevel) {
  console.time("render");
  // Background
  var gradient = c.createLinearGradient(0, 0, 0, canvasHeight);
  gradient.addColorStop(0.05, "#eeeeee");
  gradient.addColorStop(0.95, "#eeeeb0");
  c.fillStyle = gradient;
  c.fillRect(0, 0, canvasWidth, canvasHeight);

  currentRootFrame = newRootFrame || levels[0][0];
  currentRootLevel = newLevel || 0;
  px = canvasWidth / currentRootFrame.width;

  const marked = [];

  function mark(f) {
    return marked[f.left] >= f.width || (marked[f.left] = f.width);
  }

  function totalMarked() {
    let total = 0;
    let left = 0;
    for (let x in marked) {
      if (+x >= left) {
        total += marked[x];
        left = +x + marked[x];
      }
    }
    return total;
  }

  const x0 = currentRootFrame.left;
  const x1 = x0 + currentRootFrame.width;

  function drawFrame(f, y, alpha) {
    if (f.left < x1 && f.left + f.width > x0) {
      c.fillStyle = highlightPattern && f.title.match(highlightPattern) && mark(f) ? '#ee00ee' : f.color;
      c.fillRect((f.left - x0) * px, y, f.width * px, 15);

      if (f.width * px >= 21) {
        const chars = Math.floor(f.width * px / 7);
        const title = f.title.length <= chars ? f.title : f.title.substring(0, chars - 2) + '..';
        c.fillStyle = '#000000';
        c.fillText(title, Math.max(f.left - x0, 0) * px + 3, y + 12, f.width * px - 6);
      }

      if (alpha) {
        c.fillStyle = 'rgba(255, 255, 255, 0.5)';
        c.fillRect((f.left - x0) * px, y, f.width * px, 15);
      }
    }
  }

  for (let h = 0; h < levels.length; h++) {
    const y = reverse ? h * 16 : canvasHeight - (h + 1) * 16;
    const frames = levels[h];
    for (let i = 0; i < frames.length; i++) {
      if (frames[i].width >= minSamplesToShow)
        drawFrame(frames[i], y, h < currentRootLevel);
    }
  }

  if (highlightPattern != null) {
    matchContainer.style.display = 'inherit';
    matchedLabel.textContent = pct(totalMarked(), currentRootFrame.width) + '%';
  } else
    matchContainer.style.display = 'none';
  console.timeEnd("render");
}

render();

function round2dig(n) {
  return Math.round(n * 100) / 100;
}

function ratioToPct(n) {
  return ((n > 0) ? "+" : "") + (n * 100).toFixed(2) + "%";
}

function findFrame(frames, x) {
  let left = 0;
  let right = frames.length - 1;

  while (left <= right) {
    const mid = (left + right) >>> 1;
    const f = frames[mid];

    if (f.left > x) {
      right = mid - 1;
    } else if (f.left + f.width <= x) {
      left = mid + 1;
    } else {
      return f;
    }
  }

  if (frames[left] && (frames[left].left - x) * px < 0.5) return frames[left];
  if (frames[right] && (x - (frames[right].left + frames[right].width)) * px < 0.5) return frames[right];

  return null;
}

canvas.onmousemove = function() {
  const h = Math.floor((reverse ? event.offsetY : (canvasHeight - event.offsetY)) / 16);
  if (h >= 0 && h < levels.length) {
    const f = findFrame(levels[h], event.offsetX / px + currentRootFrame.left);
    if (f && f.width >= minSamplesToShow) {
      hl.style.left = (Math.max(f.left - currentRootFrame.left, 0) * px + canvas.offsetLeft) + 'px';
      hl.style.width = (Math.min(f.width, currentRootFrame.width) * px) + 'px';
      hl.style.top = ((reverse ? h * 16 : canvasHeight - (h + 1) * 16) + canvas.offsetTop) + 'px';
      // hl.firstChild.textContent = f.title;
      hl.style.display = 'block';
      if (isDiffgraph) {
        var rel_change = (f.total_samples_a == 0) ? 1.0 : f.total_delta / f.total_samples_a;
        var total_change = f.total_delta / tree.total_samples_a;
        canvas.title = `${f.title}\n(${samples(f.total_delta, true)}, ${ratioToPct(rel_change)} self, ${ratioToPct(total_change)} total)`;
        // , self_samples_a: ${f.self_samples_a}, self_samples_b: ${f.self_samples_b},  self_delta: ${f.self_delta},  total_samples_a: ${f.total_samples_a},  total_samples_b: ${f.total_samples_b}, total_delta: ${f.total_delta})`;
      } else
        canvas.title = f.title + '\n(' + samples(f.width) + ', ' + pct(f.width, levels[0][0].width) + '%)';
      canvas.style.cursor = 'pointer';
      canvas.onclick = function() {
        if (f != currentRootFrame) {
          render(f, h);
          canvas.onmousemove();
        }
      };
      status.textContent = 'Function: ' + canvas.title;
      return;
    }
  }
  canvas.onmouseout();
}

canvas.onmouseout = function() {
  hl.style.display = 'none';
  status.textContent = '\xa0';
  canvas.title = '';
  canvas.style.cursor = '';
  canvas.onclick = '';
}

function samples(n, add_plus) {
  return (add_plus && n > 0 ? "+" : "") + (n === 1 ? '1 sample' : n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')) + ' samples';
}

function pct(a, b) {
  return a >= b ? '100' : (100 * a / b).toFixed(2);
}

//// Configuration panel

function highlightApply() {
  const pattern = highlightInput.value;
  highlightPattern = (pattern == "") ? null : _stringToMaybeRegex(pattern);
  render(currentRootFrame, currentRootLevel);
}

function highlightClear() {
  highlightPattern = null;
  render(currentRootFrame, currentRootLevel);
}

function userTransformsSwap(idx1, idx2) {
  const swap = userTransforms[idx1];
  userTransforms[idx1] = userTransforms[idx2];
  userTransforms[idx2] = swap;
}

function addNewTransform() {
  syncTransformsModelWithUI();
  let type = newTransformType.value;
  userTransforms.push(_makeTransform(type, true, "", ""));
  redrawTransformsSection();
}

function deleteTransform(originator) {
  syncTransformsModelWithUI();
  userTransforms.splice(originator.internalId, 1);
  redrawTransformsSection();
}

function cloneTransform(originator) {
  syncTransformsModelWithUI();
  const idx = originator.internalId;
  userTransforms.splice(idx+1, 0, Object.assign({}, userTransforms[idx]));
  redrawTransformsSection();
}

function moveTransformUp(originator) {
  const idx = originator.internalId;
  if (idx == 0) return;
  syncTransformsModelWithUI();
  userTransformsSwap(idx-1, idx);
  redrawTransformsSection();
}

function moveTransformDown(originator) {
  const idx = originator.internalId;
  if (idx == userTransforms.length-1) return;
  syncTransformsModelWithUI();
  userTransformsSwap(idx, idx+1);
  redrawTransformsSection();
}

function refreshAfterEnabledToggle() {
  syncTransformsModelWithUI();
  redrawTransformsSection();
}

function oneByClass(container, classname) {
  return container.getElementsByClassName(classname)[0];
}

function syncTransformsModelWithUI() {
  for (var i = 0; i < transformsContainer.children.length; i++) {
    const el = transformsContainer.children[i];
    const model = userTransforms[i];
    userTransforms[i] =
      _makeTransform(model.type, oneByClass(el, 'chkEnabled').checked,
                     oneByClass(el, 'what').value,
                     model.type == 'replace' ? oneByClass(el, 'replacement').value : null);
  }
}

function redrawTransformsSection() {
  transformsContainer.innerHTML = "";
  for (var i = 0; i < userTransforms.length; i++) {
    const transform = userTransforms[i];
    var newEl = (transform.type == 'replace') ?
        transformReplaceTemplate.cloneNode(true) :
        transformFilterTemplate.cloneNode(true);
    newEl.style = '';
    newEl.internalId = i;

    const what = transform.what;
    if (typeof(what) == 'string')
      oneByClass(newEl, 'what').value = what;
    else
      oneByClass(newEl, 'what').value = what.toString().match(/^(\/.+\/)g?$/)[1];

    if (transform.type == 'replace')
      oneByClass(newEl, 'replacement').value = transform.replacement;
    else if (transform.type == 'remove')
      oneByClass(newEl, 'label').textContent = "Remove:";
    oneByClass(newEl, 'chkEnabled').checked = transform.enabled;

    oneByClass(newEl, 'chkEnabled').internalId = i;
    oneByClass(newEl, 'btnMoveUp').internalId = i;
    oneByClass(newEl, 'btnMoveDown').internalId = i;
    oneByClass(newEl, 'btnClone').internalId = i;
    oneByClass(newEl, 'btnDelete').internalId = i;
    transformsContainer.appendChild(newEl);
  }
}

redrawTransformsSection();

function applyConfiguration() {
  console.time("apply config");
  minPixelsPerFrame = minFrameWidthInPx.value || 0.25;
  normalizeDiff = isNormalized.checked;
  reverseGraph = isReversedInput.checked;
  reverse = reverseGraph;
  syncTransformsModelWithUI();
  refreshData();
  initCanvas();
  render();
  console.timeEnd("apply config");
}

function toggleSidebarVisibility() {
  sidebarVisible = !sidebarVisible;
  let style = oneByClass(document, 'configCol').style
  if (sidebarVisible) {
    style.display = 'block';
    oneByClass(document, 'sidebarToggle').innerText = ">";
  } else {
    style.display = 'none';
    oneByClass(document, 'sidebarToggle').innerText = "<";
  }
  canvasWidth = calculateCanvasWidth();
  applyConfiguration();
}

    </script>
  </body>
</html>
